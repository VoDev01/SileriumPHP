<VirtualHost *:443 *:80>
	ServerName localhost

	XSendFile on
	XSendFilePath /var/www/storage/media

	CacheQuickHandler off
	CacheRoot /var/cache/apache2
	CacheDirLevels 2
	CacheDirLength 2
	CacheSocache memcache:localhost:11211
	MemcacheConnTTL 30

	DocumentRoot /var/www/public
	<Directory /var/www/public>
		Require all granted
		DirectoryIndex index.php
		AllowOverride all
	</Directory>

	<Location /var/www/storage/media>
		Require all denied
	</Location>

	<Location .*>
		CacheEnable socache
		CacheHeader On
		CacheMinExpire 3600
		CacheMaxExpire 86400
		ExpiresActive on
		ExpiresDefault "access plus 3 hours"	
	</Location>

	<Location ^.*/media.*$>
		CacheEnable disk
		CacheMaxFileSize 50000000
		CacheMinFileSize 10000
		CacheMinExpire 3600
		CacheMaxExpire 2592000
		ExpiresActive on
		ExpiresDefault "modification plus 30 days"
	</Location>
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
	
	RewriteEngine On
	RewriteRule "^/route1\.html$" "route2.html" [R=302]
	
	SSLEngine on
	SSLCertificateFile "/etc/apache2/cert/silerium.crt"
	SSLCertificateKeyFile "/etc/apache2/cert/silerium.key"
</VirtualHost>